{{ 'custom-slider.css' | asset_url | stylesheet_tag }}
{{ 'flickity.css' | asset_url | stylesheet_tag }}
{{ 'flickity.js' | asset_url | script_tag }}


{% if section.settings.show_section %}
   <div class="custom-slider__wrapper">
        <div class="page-width">
             <h2>{{ section.settings.custom_text_title }}</h2>
        </div> 
         {% unless section.settings.collection == blank %}
         {%- assign collection = collections[section.settings.collection] -%}
            <div class="custom-slider">           
                {%- for product in collection.products -%}
                    <div class="custom-slider__product slider-item">
                        <div class="slider-item__image">
                            <img src="{{ product.featured_image | image_url: width: 280}}" alt="{{ product.title }}">
                        </div>
                        <div class="slider-item__text">
                            <p>{{ product.title | truncate: 37 }}</p>
                            <p>Price: {{ product.price | money }}</p>
                        </div>
                    </div>                        
                {%- endfor -%}
            </div>
         {% endunless %}
   </div>
{% endif %}

<script>
    var flkty = new Flickity( '.custom-slider', {
        cellAlign: 'left',
        contain: true,
        wrapAround: true,
        autoPlay: true,
        autoPlay: 3000,
        
});
</script>

{% schema %}
  {
    "name": "Custom slider",
    "settings": [
      {
         "type": "checkbox",
         "id": "show_section",
         "default": true,
         "label": "Show section"
      },
      {
         "id": "custom_text_title",
         "type": "text",
         "label": "Text box heading",
         "default": "Title"
      },
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      }
    ],
    "presets": [
      {
         "name": "Custom slider",
         "category": "Custom"
      }
   ]
  }
{% endschema %}